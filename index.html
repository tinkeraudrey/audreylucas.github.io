<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A-Frame Following Camera Scene</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/1.4.2/aframe-master.min.js"></script>
    <script>
      AFRAME.registerComponent('player-movement', {
        init: function () {
          this.velocity = new THREE.Vector3();
          this.keyPressed = {};
          
          window.addEventListener('keydown', this.onKeyDown.bind(this));
          window.addEventListener('keyup', this.onKeyUp.bind(this));
        },
        
        onKeyDown: function (event) {
          this.keyPressed[event.key.toLowerCase()] = true;
        },
        
        onKeyUp: function (event) {
          this.keyPressed[event.key.toLowerCase()] = false;
        },
        
        tick: function (time, timeDelta) {
          const speed = 0.05;
          this.velocity.set(0, 0, 0);
          
          if (this.keyPressed['w']) this.velocity.z -= speed;
          if (this.keyPressed['s']) this.velocity.z += speed;
          if (this.keyPressed['a']) this.velocity.x -= speed;
          if (this.keyPressed['d']) this.velocity.x += speed;
          
          this.el.object3D.position.add(this.velocity);
          
          // Update camera position
          const camera = document.querySelector('#camera');
          camera.object3D.position.x = this.el.object3D.position.x;
          camera.object3D.position.z = this.el.object3D.position.z + 5;
        }
      });
    </script>
  </head>
  <body>
    <a-scene>
      <a-box id="player" position="0 0.5 0" color="blue" player-movement></a-box>
      
      <a-camera id="camera" position="0 5 5" rotation="-45 0 0"></a-camera>
      
      <a-plane position="0 0 0" rotation="-90 0 0" width="20" height="20" color="#7BC8A4"></a-plane>
      
      <a-sky color="#ECECEC"></a-sky>
    </a-scene>
  </body>
</html>
